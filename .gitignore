#include <Windows.h>

int ScreenWidth, ScreenHeight;
int Interval = 100;
LRESULT CALLBACK Melter(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
     switch (Msg)
     {
     case WM_CREATE:
     {
        HDC Desktop = GetDC(HWND_DESKTOP);
        HDC Window = GetDC(hWnd);
        
        BitBlt(Window, 0, 0, ScreenWidth, ScreenHeight, Desktop, 0, 0, SRCCOPY);
        ReleaseDC(hWnd, Window);
        ReleaseDC(HWND_DESKTOP, Desktop);
        
        SetTimer(hWnd, 0, Interval, 0);
        ShowWindow(hWnd, SW_SHOW);
        break;
     }
     case WM_PAINT
     {
        ValidateRect(hWnd, 0);
        break;
     }
     case WM_TIMER
     {
         HDC Window = GetDC(hWnd)
         int X = (rand() % ScreenWidth) - (150 / 2
             Y = (rand() % 15),
             Width = (rand() % 150);
         BitBlt(Window, X, Y, Width, ScreenHeight, Window, X, 0, SRCCOPY);
         ReleaseDC(hWnd, Window);
         break;
     }
     case WM_DESTROY
     {
     
     }
     default:
         break;
     }
}
